<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="무료 온라인 타이핑 연습 사이트 - 영어와 한글 타이핑 속도와 정확도를 향상시키세요. 실시간 WPM과 정확도 측정.">
    <meta name="keywords" content="타이핑 연습, 타자 연습, 영어 타이핑, 타이핑 게임, WPM, 타자 속도, 타자 정확도">
    <meta name="author" content="typingbook.com">
    <meta property="og:title" content="타이핑 연습 - typingbook.com">
    <meta property="og:description" content="무료 온라인 타이핑 연습 사이트 - 영어와 한글 타이핑 속도와 정확도를 향상시키세요.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.typingbook.com">
    <title>타이핑 연습 - typingbook.com | 무료 온라인 타자 연습</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <!-- Google AdSense -->
    <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
        crossorigin="anonymous"></script> -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            margin: 0;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .nav-logo a {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 0;
            position: relative;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #667eea;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .nav-links a:hover::after,
        .nav-links a.active::after {
            transform: scaleX(1);
        }

        main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }

        .category-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .category-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .category-card p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #666;
        }

        .typing-area {
            display: none;
        }

        .typing-area.active {
            display: block;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .typing-content {
            margin-bottom: 30px;
        }

        .sentence-display {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            line-height: 1.6;
            color: #333;
            min-height: 80px;
            display: flex;
            align-items: center;
        }

        .current-sentence {
            font-weight: bold;
            color: #667eea;
        }

        .input-area {
            position: relative;
        }

        .typing-input {
            width: 100%;
            padding: 15px 20px;
            border: 3px solid #e9ecef;
            border-radius: 15px;
            font-size: 1.1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .typing-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .typing-input.correct {
            border-color: #28a745;
        }

        .typing-input.incorrect {
            border-color: #dc3545;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .accuracy-indicator {
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin-bottom: 20px;
        }

        .ad-container {
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .top-ad {
            margin-bottom: 30px;
        }

        .bottom-ad {
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            main {
                padding: 20px 10px;
            }

            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .controls {
                flex-direction: column;
            }

            .ad-container {
                margin: 15px;
                padding: 10px;
            }

            .nav-content {
                flex-direction: column;
                gap: 15px;
            }

            .nav-links {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 30px;
            }

            .social-links {
                justify-content: center;
            }

            .typing-input {
                font-size: 1rem;
                padding: 12px 15px;
            }

            .sentence-display {
                font-size: 1.1rem;
                padding: 15px;
            }

            .stat-value {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .typing-input {
                font-size: 0.9rem;
                padding: 10px;
            }

            .sentence-display {
                font-size: 1rem;
                padding: 12px;
                min-height: 60px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .stat-value {
                font-size: 1.3rem;
            }

            .stat-label {
                font-size: 0.8rem;
            }
        }
        

        .footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 60px 0 20px;
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            padding: 0 20px;
        }

        .footer-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-section p {
            color: #666;
            line-height: 1.6;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul a:hover {
            color: #667eea;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: #666;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .social-links a:hover {
            color: #667eea;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .footer-bottom p {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-content">
            <div class="nav-logo">
                <a href="/">타이핑북</a>
            </div>
            <div class="nav-links">
                <a href="/" class="active">타이핑 연습</a>
                <a href="guide.html">사용 가이드</a>
                <a href="stats.html">나의 통계</a>
                <a href="contact.html">문의하기</a>
            </div>
        </div>
    </nav>

    <!-- 상단 광고 -->
    <!-- <main>
        <div class="ad-container top-ad">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                data-ad-slot="XXXXXXXXXX"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div> -->
    <main>

        <div class="container">
        <div class="header">
            <h1>타이핑 연습</h1>
            <p>문장을 따라 타이핑하여 속도와 정확도를 향상시켜보세요!</p>
        </div>

        <div class="category-menu" id="categoryMenu">
            <!-- 카테고리 카드들이 여기에 동적으로 추가됩니다 -->
        </div>

        <div class="typing-area" id="typingArea">
            <div class="stats">
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">정확도</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timer">00:00</div>
                <div class="stat-label">시간</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="typing-content">
            <div class="sentence-display" id="sentenceDisplay">
                타이핑을 시작하려면 아래 입력창에 타이핑하세요.
            </div>
            <div class="input-area">
                <input type="text" class="typing-input" id="typingInput" placeholder="여기에 타이핑하세요..." autocomplete="off">
                <div class="accuracy-indicator" id="accuracyIndicator"></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="startBtn">시작</button>
            <button class="btn btn-secondary" id="resetBtn">다시 시작</button>
            <button class="btn btn-secondary" id="nextBtn">다음 문장</button>
        </div>

        <!-- 하단 광고 -->
        <!-- <div class="ad-container bottom-ad">
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                data-ad-slot="XXXXXXXXXX"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div> -->
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>타이핑북 소개</h3>
                <p>타이핑북은 무료 온라인 타이핑 연습 사이트입니다. 영어와 한글 타이핑 실력을 향상시키고 싶은 모든 분들을 위해 제공됩니다.</p>
            </div>
            <div class="footer-section">
                <h3>빠른 링크</h3>
                <ul>
                    <li><a href="/guide">사용 가이드</a></li>
                    <li><a href="/stats">나의 통계</a></li>
                    <li><a href="/contact">문의하기</a></li>
                    <li><a href="/privacy">개인정보처리방침</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>문의하기</h3>
                <p>이메일: contact@typingbook.com</p>
                <div class="social-links">
                    <a href="#" target="_blank">Facebook</a>
                    <a href="#" target="_blank">Twitter</a>
                    <a href="#" target="_blank">Instagram</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 타이핑북. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const sentenceCategories = {
            middleRow: {
                name: "중간 행 키보드 연습",
                description: "중간 행 키보드 자판 연습을 위한 문장들",
                sentences: [
            //middle row keyboard
 "Dad had a gala in a hall.",
"Sally adds salad for a lad.",
"Hal has a flask for gala.",
"A lad shall dash to a hall.",
"Dad asks Sally for salad.",
"Gala had a salad for all.",
"Sally had half a flask.",
"A lad had salad at gala.",
"Hal had a hall all day.",
"Dad shall add salad now.",
"Sally has a gala in May.",
"A lad had a gala at hall.",
"Dad asks Hal for a gala.",
"All salad had half salt.",
"Sally had a half flask.",
"Gala had salad for Dad.",
"A lad shall add half salt.",
"Sally had gala all day.",
"Dad had a salad at gala.",
"Hal had gala salad too.",
"All lads had salad at gala.",
"Sally had a hall for gala.",
"Gala had half a salad.",
"Dad adds salt for salad.",
"A lad shall add salad.",
"Hal had salad at gala.",
"All gala had half salad.",
"Sally shall dash to gala.",
"Dad had salad for Sally.",
"Hal had gala for a lad.",
"Sally adds half salt fast.",
"Gala has salad for all.",
"Dad shall add a salad.",
"All lads had gala food.",
"Sally had gala at dawn.",
"Gala had salad in hall.",
"Dad had gala with Sally.",
"A lad had gala in hall.",
"Sally had half salad.",
"Gala had all salad.",
"Dad asks for gala salad.",
"Sally adds gala to list.",
"Hal had salad with Dad.",
"All gala had lads dash.",
"Sally shall dash for gala.",
"Dad adds half salad.",
"Gala had salad at dawn.",
"Hal adds salt to salad.",
"Sally had gala for Dad.",
"Dad had gala with lads."
                ]
            },
            middleRowLetters: {
                name: "중간 행 알파벳 연습",
                description: "중간 행의 각 알파벳을 하나씩 타이핑합니다",
                sentences: [
                    "a", "s", "d", "f", "g", "h", "j", "k", "l",
                    "l", "k", "j", "h", "g", "f", "d", "s", "a",
                    "a", "s", "d", "f", "j", "k", "l", "h", "g",
                    "g", "h", "j", "k", "l", "k", "j", "h", "g",
                    "a", "d", "f", "s", "j", "k", "l", "a", "s", "d", "f", "j", "k", "l"
                ]
            },
            topRow: {
                name: "상단 행 키보드 연습",
                description: "상단 행 키보드 자판 연습을 위한 문장들",
                sentences: [
"Peter had a salad for lunch.",
"Julia will type fast for class.",
"Fred kept all quiet in hall.",
"Kate read the gala list aloud.",
"Paul asked Sally for help.",
"Ruth had salad with Paul.",
"Jerry will read fast at gala.",
"Tim kept all quiet in hall.",
"Julie had tea at a gala.",
"Paul read that Sally sang.",
"Peter will read all the maps.",
"Fred had soup and salad.",
"Kate will type fast and well.",
"Jerry asked Ruth for tea.",
"Paul kept that list in hall.",
"Ruth will read gala news.",
"Julie had quick tea break.",
"Fred read tall tales aloud.",
"Peter kept Sally’s tea hot.",
"Kate asked Paul for help.",
"Tim read all about the play.",
"Julie will type fast for work.",
"Paul kept Ruth’s seat safe.",
"Ruth had tea and salad.",
"Jerry read all the gala notes.",
"Peter will ask for quick help.",
"Fred read maps in the hall.",
"Kate kept a gala list neat.",
"Julie will read the news.",
"Paul had tea with Kate.",
"Jerry typed all the notes fast.",
"Fred kept all data safe.",
"Peter read the gala news.",
"Kate had soup and salad.",
"Tim asked Julie for help.",
"Paul kept all quiet in hall.",
"Julie typed the gala menu.",
"Ruth read tales aloud today.",
"Fred kept a map for Peter.",
"Jerry will read at the gala.",
"Kate read all the plays aloud.",
"Peter kept all lists safe.",
"Fred typed a gala report.",
"Julie read the tea menu.",
"Paul kept Ruth’s seat safe.",
"Jerry had soup and salad.",
"Tim read the gala notes.",
"Kate kept all the maps safe.",
"Fred read the gala speech.",
"Julie typed all the data."
                ]
            },
            bottomRow: {
                name: "하단 행 키보드 연습",
                description: "하단 행 키보드 자판 연습을 위한 문장들",
                sentences: [
            "Max had a salad at noon.",
"Sam will bake muffins today.",
"Ben fixed a small lamp.",
"Dan made a calm plan.",
"Val had jam and milk.",
"Zack was calm and kind.",
"Mom baked muffins fast.",
"Nina made a small map.",
"Sam had jam with bread.",
"Ben was calm all day.",
"Val made a milk shake.",
"Dan baked a small cake.",
"Mom fixed the lamp base.",
"Nina had jam for lunch.",
"Zack made a calm plan.",
"Ben had a muffin snack.",
"Max baked a small loaf.",
"Sam was calm and happy.",
"Val made jam at home.",
"Dan had milk with cake.",
"Mom baked a calm loaf.",
"Nina made a lamp stand.",
"Zack was kind and calm.",
"Max fixed the lamp base.",
"Sam made jam with milk.",
"Ben baked a small bun.",
"Val had a calm smile.",
"Dan was kind all day.",
"Mom made muffins fast.",
"Zack baked jam rolls.",
"Nina had milk and jam.",
"Max made a calm plan.",
"Sam baked a small loaf.",
"Ben had jam with milk.",
"Val was calm and kind.",
"Dan made jam rolls.",
"Mom baked a muffin tray.",
"Nina was kind to Sam.",
"Zack had milk and cake.",
"Max baked a calm cake.",
"Sam made a lamp base.",
"Ben was calm at home.",
"Val baked muffins today.",
"Dan had a calm plan.",
"Mom fixed the small lamp.",
"Nina baked a milk loaf.",
"Zack made a muffin tray.",
"Max was calm with Sam.",
"Sam baked jam muffins.",
"Ben had milk with cake."
                ]
            },
            realEnglish: {
                name: "실제 영어 문장 연습",
                description: "실제 상황에서 사용되는 영어 문장들",
                sentences: [
            "Camels use the fat for energy.",
            "One day, they jump out from mom's pouch.",
            "The chameleon goes quickly to the green glass and turns green.",
            "They sing to attract females.",
            "Nobody knows for sure why they died out.",
            "I look like a tiger.",
            "I use my forked tongue to smell.",
            "Even when we are sleeping, we are hanging upside down.",
            "Whale can't breathe through the water.",
            "They fly in a V-shape.",
            "Your legs are covered with fine hair.",
            "I am making the webs to catch bugs.",
            "I try to reach the leaves at the top of them, so I have a long neck.",
            "The bees started to put honey in their house.",
            "Winter is too cold for bear to catch prey, so they have a long winter sleep.",
            "It changes sunlight into energy.",
            "They store lots of water in their trunks.",
            "Spores are everywhere.",
            "Something scary seems to happen.",
            "It is easy for them to get dirty.",
            "Count the tree rings on the stumps.",
            "Each firefly sends a different signal.",
            "The ink can also make your eyes hurt.",
            "A wet nose helps them smell better.",
            "She was tickling the sole of dad's foot with a brush.",
            "It also protects your ears from loud noises.",
            "Minhee got a tape recorder for her birthday.",
            "Why do I burp when I drink soda?",
            "The air pressure inside and outside your ear is not the same.",
            "The skin (which covers your hands and feet) absorbs water well.",
            "When you see delicious food, your mouth starts to water.",
            "A bump appeared at once. It was very itchy.",
            "The sun can be harmful for your skin.",
            "You can gulp lots of fresh air when you yawn.",
            "If you want to stop hiccuping, try to hold your breath.",
            "Sneezing can remove germs and dust from the nose.",
            "It delivers oxygen and nutrients to our body.",
            "All people have different spots for sweat glands on their fingers.",
            "Our tongue can taste sweet, salty, bitter and sour.",
            "If our body loses its balance, the water in our ears is not calm.",
            "Our brains sort and store information while we're sleeping.",
            "Sometimes the gas goes up and out. It is called a burp.",
            "Goose bumps don't let us lose our body heat.",
            "My little teeth don't fit my mouth and jaw anymore.",
            "What do other people think about cloning?",
            "Your belly button is the spot where the umbilical cord used to be.",
            "If you are color-blind, you might think that green leaves are gray.",
            "Germs like playing in your sweaty shoes.",
            "By the way, why do people think rumbling is a sign of hunger?",
            "Soap bubbles like to stick together.",
            "A kernel of corn has a little bit of water in it.",
            "Salt lowers the freezing point of water.",
            "The heat first divides the proteins.",
            "Density means how close A and B are.",
            "Microwaves go through the bread, and heat only the water in the bread.",
            "Don't open attached files you don't know.",
            "If the temperature gets cooler, the water in the air turns into a liquid.",
            "The pictures pass quickly so they look like they are in motion.",
            "A glow stick is put in a plastic tube, and in a glow stick, two kinds of liquid are in separate areas.",
            "If you touch electrical devices with a wet hand, you may get an electric shock."
                ]
            }
        };

        // 중간 행 알파벳 연습에 랜덤 30개 추가
        (function() {
            const middleRowKey = 'middleRowLetters';
            const letters = ['a','s','d','f','g','h','j','k','l'];
            const extraCount = 30;
            if (sentenceCategories[middleRowKey]) {
                for (let i = 0; i < extraCount; i++) {
                    const letter = letters[Math.floor(Math.random() * letters.length)];
                    sentenceCategories[middleRowKey].sentences.push(letter);
                }
            }
        })();

        let currentCategory = null;
        let currentSentenceIndex = 0;
        let startTime = null;
        let timer = null;
        let isTyping = false;
        let totalWords = 0;
        let totalTime = 0;
        let correctWords = 0;
        let errorWords = [];
        let sessionErrors = [];
        
        // 카테고리 메뉴 초기화
        function initializeCategoryMenu() {
            const categoryMenu = document.getElementById('categoryMenu');
            const typingArea = document.getElementById('typingArea');
            
            Object.entries(sentenceCategories).forEach(([key, category]) => {
                const card = document.createElement('div');
                card.className = 'category-card';
                card.innerHTML = `
                    <h3>${category.name}</h3>
                    <p>${category.description}</p>
                    <div class="category-stats">
                        <span>${category.sentences.length} 문장</span>
                        <span>난이도: ${getDifficulty(category.sentences)}</span>
                    </div>
                `;
                
                card.addEventListener('click', () => {
                    currentCategory = key;
                    currentSentenceIndex = 0;
                    resetTyping();
                    categoryMenu.style.display = 'none';
                    typingArea.classList.add('active');
                    updateDisplay();
                });
                
                categoryMenu.appendChild(card);
            });
        }
        
        // 카테고리의 난이도 계산
        function getDifficulty(sentences) {
            const avgLength = sentences.reduce((sum, sent) => sum + sent.length, 0) / sentences.length;
            if (avgLength < 30) return '쉬움';
            if (avgLength < 50) return '보통';
            return '어려움';
        }
        
        // 타이핑 영역으로 돌아가기
        function backToMenu() {
            const categoryMenu = document.getElementById('categoryMenu');
            const typingArea = document.getElementById('typingArea');
            
            categoryMenu.style.display = 'grid';
            typingArea.classList.remove('active');
            resetTyping();
        }

        const sentenceDisplay = document.getElementById('sentenceDisplay');
        const typingInput = document.getElementById('typingInput');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const nextBtn = document.getElementById('nextBtn');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const timerDisplay = document.getElementById('timer');
        const progressBar = document.getElementById('progress');
        const accuracyIndicator = document.getElementById('accuracyIndicator');

        function updateDisplay() {
            if (!currentCategory) return;
            const currentSentences = sentenceCategories[currentCategory].sentences;
            sentenceDisplay.innerHTML = `<span class="current-sentence">${currentSentences[currentSentenceIndex]}</span>`;
            progressBar.style.width = `${((currentSentenceIndex + 1) / currentSentences.length) * 100}%`;
        }

        function startTimer() {
            startTime = Date.now();
            timer = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                totalTime = elapsed;
            }, 1000);
        }

        function stopTimer() {
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
        }

        function calculateWPM() {
            if (totalTime === 0) return 0;
            const minutes = totalTime / 60;
            return Math.round(totalWords / minutes);
        }

        function calculateAccuracy() {
            if (totalWords === 0) return 100;
            return Math.round((correctWords / totalWords) * 100);
        }

        function updateStats() {
            wpmDisplay.textContent = calculateWPM();
            accuracyDisplay.textContent = `${calculateAccuracy()}%`;
        }

        function checkAccuracy(input, target) {
            const inputWords = input.trim().split(/\s+/);
            const targetWords = target.trim().split(/\s+/);
            
            let correct = 0;
            for (let i = 0; i < Math.min(inputWords.length, targetWords.length); i++) {
                if (inputWords[i] === targetWords[i]) {
                    correct++;
                }
            }
            
            return {
                correct,
                total: targetWords.length,
                percentage: Math.round((correct / targetWords.length) * 100)
            };
        }

        function startTyping() {
            isTyping = true;
            startTimer();
            typingInput.focus();
            startBtn.textContent = '일시정지';
            startBtn.classList.remove('btn-primary');
            startBtn.classList.add('btn-secondary');
        }

        function pauseTyping() {
            isTyping = false;
            stopTimer();
            startBtn.textContent = '계속';
            startBtn.classList.remove('btn-secondary');
            startBtn.classList.add('btn-primary');
        }

        function resetTyping() {
            currentSentenceIndex = 0;
            totalWords = 0;
            totalTime = 0;
            correctWords = 0;
            errorWords = [];
            sessionErrors = [];
            isTyping = false;
            stopTimer();
            typingInput.value = '';
            typingInput.className = 'typing-input';
            accuracyIndicator.textContent = '';
            timerDisplay.textContent = '00:00';
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            startBtn.textContent = '시작';
            startBtn.classList.remove('btn-secondary');
            startBtn.classList.add('btn-primary');
            updateDisplay();
        }

        function nextSentence() {
            if (!currentCategory) return;
            if (currentSentenceIndex < sentenceCategories[currentCategory].sentences.length - 1) {
                currentSentenceIndex++;
                typingInput.value = '';
                typingInput.className = 'typing-input';
                accuracyIndicator.textContent = '';
                updateDisplay();
            } else {
                alert('모든 문장을 완료했습니다!');
            }
        }

        // 세션 통계 저장
        function saveSessionStats() {
            const sessionData = {
                date: new Date().toISOString(),
                category: currentCategory,
                wpm: calculateWPM(),
                accuracy: calculateAccuracy(),
                totalWords: totalWords,
                totalErrors: sessionErrors.length,
                errorWords: sessionErrors,
                duration: totalTime
            };

            const existingStats = localStorage.getItem('typingStats');
            const stats = existingStats ? JSON.parse(existingStats) : [];
            stats.push(sessionData);
            localStorage.setItem('typingStats', JSON.stringify(stats));
        }

        typingInput.addEventListener('input', (e) => {
            if (!currentCategory) return;

            const input = e.target.value;
            const target = sentenceCategories[currentCategory].sentences[currentSentenceIndex];
            
            if (input.length > 0) {
                const accuracy = checkAccuracy(input, target);
                accuracyIndicator.textContent = `정확도: ${accuracy.percentage}%`;
                
                // 오타 추적
                if (input.length > 0 && !target.startsWith(input)) {
                    const currentWord = input.split(' ').pop();
                    const targetWord = target.split(' ')[input.split(' ').length - 1];
                    if (currentWord && targetWord && currentWord !== targetWord) {
                        const error = {
                            word: targetWord,
                            typed: currentWord,
                            timestamp: Date.now()
                        };
                        if (!sessionErrors.find(e => e.word === targetWord && e.typed === currentWord)) {
                            sessionErrors.push(error);
                        }
                    }
                }
                
                if (input === target) {
                    e.target.classList.add('correct');
                    e.target.classList.remove('incorrect');

                    // 통계는 타이핑 세션이 시작된 상태일 때만 집계
                    if (isTyping) {
                        correctWords += target.split(/\s+/).length;
                        totalWords += target.split(/\s+/).length;
                        updateStats();
                    }
                    
                    setTimeout(() => {
                        if (currentSentenceIndex < sentenceCategories[currentCategory].sentences.length - 1) {
                            nextSentence();
                        } else {
                            if (isTyping) {
                                saveSessionStats();
                                alert('축하합니다! 모든 문장을 완료했습니다!');
                                pauseTyping();
                            }
                        }
                    }, 300);
                } else if (target.startsWith(input)) {
                    e.target.classList.remove('incorrect');
                    e.target.classList.remove('correct');
                } else {
                    e.target.classList.add('incorrect');
                    e.target.classList.remove('correct');
                }
            } else {
                e.target.classList.remove('correct', 'incorrect');
                accuracyIndicator.textContent = '';
            }
        });

        startBtn.addEventListener('click', () => {
            if (isTyping) {
                pauseTyping();
            } else {
                startTyping();
            }
        });

        resetBtn.addEventListener('click', resetTyping);
        nextBtn.addEventListener('click', nextSentence);

        // 메뉴에 돌아가기 버튼 추가
        const backButton = document.createElement('button');
        backButton.className = 'btn btn-secondary';
        backButton.textContent = '메뉴로 돌아가기';
        backButton.style.marginRight = '10px';
        backButton.addEventListener('click', backToMenu);
        document.querySelector('.controls').insertBefore(backButton, startBtn);

        // 초기화
        initializeCategoryMenu();
    </script>
</body>
</html> 